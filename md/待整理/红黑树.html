<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>红黑树 | My vuepress</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <script src="https://hm.baidu.com/hm.js?xxxxxxxxxxx"></script>
    <meta name="description" content="Todo">
    <meta name="robots" content="all">
    <meta name="author" content="pdai">
    <meta name="keywords" content="Java 全栈知识体系, java体系, java知识体系, java框架,java详解,java学习路线,java spring, java面试, 知识体系, java技术体系, java编程, java编程指南,java开发体系, java开发,java教程,java,java数据结构, 算法, 开发基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="preload" href="/assets/css/0.styles.144ea653.css" as="style"><link rel="preload" href="/assets/js/app.afcd353c.js" as="script"><link rel="preload" href="/assets/js/2.6527dd7c.js" as="script"><link rel="preload" href="/assets/js/74.952412ed.js" as="script"><link rel="prefetch" href="/assets/js/10.b8af9589.js"><link rel="prefetch" href="/assets/js/11.da070787.js"><link rel="prefetch" href="/assets/js/12.e8c2df3f.js"><link rel="prefetch" href="/assets/js/13.13f8690b.js"><link rel="prefetch" href="/assets/js/14.97d7a7c6.js"><link rel="prefetch" href="/assets/js/15.ca82dd18.js"><link rel="prefetch" href="/assets/js/16.0795663b.js"><link rel="prefetch" href="/assets/js/17.9f529ede.js"><link rel="prefetch" href="/assets/js/18.aa494d1d.js"><link rel="prefetch" href="/assets/js/19.c5e368a6.js"><link rel="prefetch" href="/assets/js/20.8486962d.js"><link rel="prefetch" href="/assets/js/21.1a96e733.js"><link rel="prefetch" href="/assets/js/22.5b4929c3.js"><link rel="prefetch" href="/assets/js/23.7bc228ce.js"><link rel="prefetch" href="/assets/js/24.63116242.js"><link rel="prefetch" href="/assets/js/25.e9163e8b.js"><link rel="prefetch" href="/assets/js/26.31132baf.js"><link rel="prefetch" href="/assets/js/27.728265df.js"><link rel="prefetch" href="/assets/js/28.4cb93316.js"><link rel="prefetch" href="/assets/js/29.30a99cb0.js"><link rel="prefetch" href="/assets/js/3.e3c760c5.js"><link rel="prefetch" href="/assets/js/30.39c64819.js"><link rel="prefetch" href="/assets/js/31.78e9d272.js"><link rel="prefetch" href="/assets/js/32.e71f2609.js"><link rel="prefetch" href="/assets/js/33.b182a570.js"><link rel="prefetch" href="/assets/js/34.d919b2af.js"><link rel="prefetch" href="/assets/js/35.e2cdb183.js"><link rel="prefetch" href="/assets/js/36.759e107d.js"><link rel="prefetch" href="/assets/js/37.a0ccb526.js"><link rel="prefetch" href="/assets/js/38.8f8ec90d.js"><link rel="prefetch" href="/assets/js/39.bcb56569.js"><link rel="prefetch" href="/assets/js/4.e1e5a770.js"><link rel="prefetch" href="/assets/js/40.cb9e68d1.js"><link rel="prefetch" href="/assets/js/41.f7324d34.js"><link rel="prefetch" href="/assets/js/42.fbc4875e.js"><link rel="prefetch" href="/assets/js/43.602efb90.js"><link rel="prefetch" href="/assets/js/44.5cdea7dd.js"><link rel="prefetch" href="/assets/js/45.08b55f16.js"><link rel="prefetch" href="/assets/js/46.89b660d7.js"><link rel="prefetch" href="/assets/js/47.8041c4a7.js"><link rel="prefetch" href="/assets/js/48.54a6e067.js"><link rel="prefetch" href="/assets/js/49.63fc5fb5.js"><link rel="prefetch" href="/assets/js/5.b9a4a83e.js"><link rel="prefetch" href="/assets/js/50.defc28ad.js"><link rel="prefetch" href="/assets/js/51.01fa48a2.js"><link rel="prefetch" href="/assets/js/52.04cb5e30.js"><link rel="prefetch" href="/assets/js/53.b04e4c27.js"><link rel="prefetch" href="/assets/js/54.a99c8dca.js"><link rel="prefetch" href="/assets/js/55.f15500bf.js"><link rel="prefetch" href="/assets/js/56.c9d0f497.js"><link rel="prefetch" href="/assets/js/57.eb7e4183.js"><link rel="prefetch" href="/assets/js/58.4a5207ff.js"><link rel="prefetch" href="/assets/js/59.8620aeb6.js"><link rel="prefetch" href="/assets/js/6.ddfdb723.js"><link rel="prefetch" href="/assets/js/60.a1b1dae5.js"><link rel="prefetch" href="/assets/js/61.e6ec84e2.js"><link rel="prefetch" href="/assets/js/62.8703dde9.js"><link rel="prefetch" href="/assets/js/63.76d6c8fe.js"><link rel="prefetch" href="/assets/js/64.1abf1796.js"><link rel="prefetch" href="/assets/js/65.7430076b.js"><link rel="prefetch" href="/assets/js/66.9ca1a22b.js"><link rel="prefetch" href="/assets/js/67.aeba61a8.js"><link rel="prefetch" href="/assets/js/68.81e8ae85.js"><link rel="prefetch" href="/assets/js/69.fb8f7d5d.js"><link rel="prefetch" href="/assets/js/7.6689766d.js"><link rel="prefetch" href="/assets/js/70.f55dc26a.js"><link rel="prefetch" href="/assets/js/71.d310670d.js"><link rel="prefetch" href="/assets/js/72.d0b65202.js"><link rel="prefetch" href="/assets/js/73.fbee5211.js"><link rel="prefetch" href="/assets/js/75.2f6086aa.js"><link rel="prefetch" href="/assets/js/76.7b2a8f50.js"><link rel="prefetch" href="/assets/js/77.f75ad0d8.js"><link rel="prefetch" href="/assets/js/8.1f4717e3.js"><link rel="prefetch" href="/assets/js/9.a70f9ef6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.144ea653.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">My vuepress</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/md/java/base/Base.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/md/about/并发编程.html" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/md/java/base/Base.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/md/about/并发编程.html" class="nav-link">
  关于
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="排序二叉树"><a href="#排序二叉树" class="header-anchor">#</a> 排序二叉树</h1> <p>排序二叉树也是二叉树，但它没有重复元素，而且是有序的二叉树。</p> <p>对于每个节点而言：</p> <ul><li>如果左子树不为空，则左子树上所有节点都小于该节点</li> <li>如果右子树不为空，则右子树上的所有节点都大于该节点</li></ul> <h1 id="树的存储"><a href="#树的存储" class="header-anchor">#</a> 树的存储</h1> <p>计算机的内存是线性的, 而树是非线性的数据结构,如何将非线性的树状结构在线性的内存中存储起来,这是一个值得探讨的问题。目前主要有以下几种存储方式：</p> <ol><li><p>双亲表示法：
实现:通常用一个二维数组，在存储结点的同时也将对应节点的父节点存储进来。
特点：找父节点容易、找子节点难。
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%9101.png" alt="Alt text"></p></li> <li><p>孩子表示法：
实现：每个结点都存储在一个二维数组的第一列里面，多个子节点之间以链表方式连接，最后一个子节点的指向为NULL，数组的第二个元素指向其子节点链表的起始地址。<br>
特点：找子节点容易，找父节点难。
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%9102.png" alt="Alt text"></p></li> <li><p>双亲孩子表示法：
实现：将双亲表示法与孩子表示法综合起来，既存储父节点的下标，又指向子节点链表。
特征：找父节点与子节点都比较方便，但相对前面两种复杂度有一定程度的提升。
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%9103.png" alt="Alt text"></p></li></ol> <h1 id="二叉树存储"><a href="#二叉树存储" class="header-anchor">#</a> 二叉树存储</h1> <p>二叉树的顺序存储结构:
二叉树的顺序存储结构中节点的存放次序是：对该树中每个节点进行编号，其编号从小到大的顺序就是节点存放在连续存储单元的先后次序。</p> <p>若把二叉树存储到一维数组中,则该编号就是下标值加1。
树中各节点的编号与等高度的完全二叉树中对应位置上节点的编号相同。
顺序二叉树，如下图：
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%9104.png" alt="Alt text"></p> <p>二叉树的链式存储结构:
在二叉树的链接存储中，节点的结构如下:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">node</span>
<span class="token punctuation">{</span>   
ElemType data<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">node</span> <span class="token operator">*</span>lchild<span class="token punctuation">,</span><span class="token operator">*</span>rchild<span class="token punctuation">;</span>
<span class="token punctuation">}</span> BTNode<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其中，data表示值域，用于存储对应的数据元素，lchild和rchild分别表示左指针域和右指针域，用于分别存储左孩子节点和右孩子节点（即左、右子树的根节点）的存储位置。</p> <p>红黑树（R-B Tree），一种二叉查找树，但在每个结点上增加一个存储位表示结点的颜色，可以是Red或Black。
通过对任何一条从根到叶子的路径上各个结点着色方式的限制，红黑树确保没有一条路径会比其他路径长出俩倍，因而是接近平衡的。</p> <h1 id="基本算法"><a href="#基本算法" class="header-anchor">#</a> 基本算法</h1> <h2 id="查找"><a href="#查找" class="header-anchor">#</a> 查找</h2> <p>排序二叉树优点：查找元素很方便、高效，与二分法类似</p> <ol><li>首先与根节点比较,如果相同就找到了</li> <li>如果小于根节点，则在左子树中递归查找</li> <li>如果大于根节点，则到右子树中递归查找</li></ol> <p>此外，还可以方便的找出最小值与最大值(最左边的点、最右边的点)</p> <h2 id="遍历"><a href="#遍历" class="header-anchor">#</a> 遍历</h2> <p>也可以方便的按顺序遍历。用递归的方式：</p> <ol><li>访问左子树</li> <li>访问当前节点</li> <li>访问右子树</li></ol> <h2 id="插入"><a href="#插入" class="header-anchor">#</a> 插入</h2> <p>插入元素首先要找到插入位置，即当前要插入节点的父节点</p> <ol><li>与当前节点比较，如果相同，表示已经存在了不能插入</li> <li>如果小于当前节点，则到左子树中寻找，如果左子树为空，则当前节点即为要找的父节点</li> <li>如果大于当前节点，则到右子树中寻找，如果右子树为空，则当前节点即为要找的父节点</li></ol> <p>找到父节点后，即可插入，如果插入元素小于父节点，则作为左孩子插入，否则作为右孩子插入。</p> <h2 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h2> <p>删除最复杂，有三种情况</p> <ol><li>节点为叶子节点</li> <li>节点只有一个孩子节点</li> <li>节点有两个孩子节点</li></ol> <p>节点为叶子节点： 直接删除，修改父节点对应的孩子节点为空</p> <p>节点只有一个孩子节点： 让父节点与要删除节点的子节点建立链接</p> <p>节点有两个孩子节点： 找到后继节点，替换待删除节点，然后再删除后继节点</p> <h1 id="平衡的排序二叉树"><a href="#平衡的排序二叉树" class="header-anchor">#</a> 平衡的排序二叉树</h1> <p>排序二叉树的形状与插入和删除的顺序密切相关，极端情况下会退化为一个链表
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%9105.png" alt="Alt text"></p> <p>退化为链表后，排序二叉树的优点就都没有了。高度不平衡效率也会变得很低。</p> <p><code>平衡的定义：任何节点的左右子树的高度差最多为一</code> 称为AVL树。
具有相应的算法，可以在插入和删除节点时，通过一次或多次旋转操作来重新平衡树。</p> <h1 id="红黑树"><a href="#红黑树" class="header-anchor">#</a> 红黑树</h1> <p>在TreeMap的实现中，用的并不是AVL树，而是红黑树。
与AVL树类似，红黑树也是一种平衡的排序二叉树，在插入和删除节点时通过旋转操作来平衡的。
但它并不是高度平衡的，而是大致平衡的。</p> <p><code>大致平衡：确保任意一条从根到叶子节点的路径，没有任何一条路径的长度会比其他路径长过两倍。</code>
红黑树减弱了对平衡的要求，但降低了保持平衡需要的开销，在实际应用中统计性能高于AVL树。</p> <p>它是如何保证一棵n个结点的红黑树的高度始终保持在logn的呢？这就引出了红黑树的5个性质：</p> <ol><li>每个结点要么是红的要么是黑的。</li> <li>根结点是黑的。</li> <li>每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。</li> <li>如果一个结点是红的，那么它的两个儿子都是黑的。</li> <li>对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。</li></ol> <p>正是红黑树的这5条性质，使一棵n个结点的红黑树始终保持了logn的高度，从而也就解释了上面所说的“红黑树的查找、插入、删除的时间复杂度最坏为O(log n)”这一结论成立的原因。
<img src="/images/ref/%E7%BA%A2%E9%BB%91%E6%A0%910.png" alt="Alt text"></p> <p>对于AVL树和红黑树，他们保持平衡的细节都是比较复杂的。
我们只需要知道他们都是排序二叉树，通过在插入和删除时执行开销不大的旋转操作保持了树的高度平衡或大致平衡，从而保证了树的查找效率。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/realpdai/tech-arch-doc/edit/master/md/待整理/红黑树.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-6-26 17:00:44</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.afcd353c.js" defer></script><script src="/assets/js/2.6527dd7c.js" defer></script><script src="/assets/js/74.952412ed.js" defer></script>
  </body>
</html>
